---
title: "mics_disaggregation_learner"
author: "Sunmin Lee"
date: "Feb/09/2021"
output:
  pdf_document: default
  html_document: default
---

## R Markdown
Note: This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.


# Load R packages 
Note that following version of R packages are used for this analysis. 
  - dplyr_0.8.1
  - readr_1.3.1
  - collapse_1.5.1

```{r load packages}
library(dplyr)
library(readr)
library(collapse) # Refer to https://github.com/SebKrantz/collapse
```

# Import micro data (change this path to your directory!)
Note: The micro data for other countries are available in Microsoft Teams - GEMR Data Repository. 
In this analysis, MICS survey from Benin 2014 is used. 

```{r import data}
micro_data <- read_csv("/Users/sunminlee/Desktop/gemr/disaggregation/MICS_BEN_2014.csv")
#View(micro_data)
```


# Identify education level to use as a threshold

### Check the summary statistics (mean) of "literacy" by "comp_prim"
To identify which education level (e.g. primary, lower secondary, etc.) can be used as a threshold for the outcomes by household education, firstly I have compared the mean value of variable "literacy_1549 (0=No, 1=Yes)" by primary completion variable, "comp_prim (0=No, 1=Yes)". The below result shows that if an individual has completed primary education, then by 97.65% chance, an individual is literate. Likewise, if an individual has not completed primary education, by 15.02% chance he/she will be illiterate. This result clearly shows that completing primary education increases the chance of being literate. 

```{r Mean of literacy by primary completion}
collapse <- collap(micro_data, literacy_1549 ~ comp_prim, FUN = list(fmean))
collapse
```

### Check the summary statistics (mean) of "literacy" by "comp_prim" and "comp_lowsec"
However, above result only tells there is a high probability of being literate when completing primary. Since I wanted to identify which education level will give a chance to have full mark literacy, I included variable "comp_lowsec (0=No, 1=Yes)" in the disaggregation. Interestingly, the below result shows that if you completed primary but not lower secondary, you have 16.01% of chance to be illiterate which is slightly higher than not completing only primary (15.02%). On the other hand, if you finished both primary and lower secondary education, by 100% you will be literate. From this finding, we can conclude that completing lower secondary is the minimum threshold to be used for comparing household education outcomes.       

```{r Mean of literacy by primary and lower secondary completion}
collapse <- collap(micro_data, literacy_1549 ~ comp_prim + comp_lowsec, FUN = list(fmean))
collapse
```

### Check the summary stats (mean) of "literacy" by "comp_prim" and "comp_lowsec" and "comp_upsec"
Just to be sure, I have also included variable "comp_upsec" and calculated the mean value of "literacy_1549". The result is same telling that if you complete primary, lower secondary, and upper secondary, you will 100% be literate. From the initial analysis, I concluded that "comp_prim" will be the minimum threshold that can be used.  

```{r Mean of literacy by primary and lower and upper secondary completion}
collapse <- collap(micro_data, literacy_1549 ~ comp_prim + comp_lowsec + comp_upsec, FUN = list(fmean))
collapse
```


# Add more variables to compare

### Compare length of education years
After identifying the minimum threshold of education level, I tested how other variable's mean value will be like by "comp_prim". First of all, I wanted to know if length of education years will be affected by primary completion. Surprisingly, in Benin 2014, the average years of education is only 3.4 if you have not completed primary, assuming that most of the drop out happens in early primary or even in pre-primary education.

```{r Mean of edu years by primary completion}
collapse <- collap(micro_data, eduyears_2024 ~ comp_prim, FUN = list(fmean))
collapse
```

### Compare education out
(Note: Raw data of variable "eduout_prim" needs to be checked. Please skip that for the time being). Similarly, I wanted to study whether there is a high chance of education out by primary completion. If we see the result of "eduout", chances are much lower (roughly 21.37%) for those who have completed primary. Similarly, if you finished primary, there is only 5.7% chance that you will be out from lower secondary although this bumps up for upper secondary level (17.25%). However, the result tells if you even not complete primary, there is a half of probability that he/she will be out from lower secondary and almost all (93.68%) will fail in upper secondary. 

```{r Mean of eduout by primary completion}
collapse <- collap(micro_data, eduout_prim + eduout_lowsec + eduout_upsec + eduout ~ comp_prim, FUN = list(fmean))
collapse
```

### Compare age
I wanted to also know if an individual's age will be different by primary completion. No big difference was found in here. 

```{r Mean of age by primary completion}
collapse <- collap(micro_data, age + age_adjusted ~ comp_prim, FUN = list(fmean))
collapse
```

### Compare attendance
(Note: The variables meaning should be more investigated). 

```{r Mean of attend by primary completion}
collapse <- collap(micro_data, attend + attend_preschool + attend_higher ~ comp_prim, FUN = list(fmean))
collapse
```


